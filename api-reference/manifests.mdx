---
title: 'Manifests'
description: 'Create and manage encryption manifests for CryptoLay'
---

# Manifests API

Manifests define which fields should be encrypted in your data and how they should be encrypted. This API allows you to create, list, update, and delete manifests.

## Create Manifest

Create a new encryption manifest.

<RequestExample>
```bash
curl -X POST https://api.cryptolay.com.br/api/customer/manifests \
  -H "Content-Type: application/json" \
  -H "X-API-Key: YOUR_API_KEY" \
  -d '{
    "name": "User Data Manifest",
    "description": "Encrypts sensitive user information",
    "config": {
      "version": "1.0",
      "description": "User data encryption configuration"
    },
    "encryptionRules": {
      "fields": {
        "email": {
          "encrypted": true,
          "type": "string"
        },
        "phone": {
          "encrypted": true,
          "type": "string"
        },
        "ssn": {
          "encrypted": true,
          "type": "string"
        },
        "address": {
          "encrypted": false,
          "type": "string"
        }
      },
      "rsaKeyId": "key-uuid-123"
    }
  }'
```
</RequestExample>

<ResponseExample>
```json
{
  "id": "manifest-uuid-123",
  "name": "User Data Manifest",
  "description": "Encrypts sensitive user information",
  "config": {
    "version": "1.0",
    "description": "User data encryption configuration"
  },
  "encryptionRules": {
    "fields": {
      "email": {
        "encrypted": true,
        "type": "string"
      },
      "phone": {
        "encrypted": true,
        "type": "string"
      },
      "ssn": {
        "encrypted": true,
        "type": "string"
      },
      "address": {
        "encrypted": false,
        "type": "string"
      }
    },
    "rsaKeyId": "key-uuid-123"
  },
  "status": "active",
  "createdAt": "2024-01-01T00:00:00Z"
}
```
</ResponseExample>

### Request Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `name` | string | Yes | A descriptive name for the manifest |
| `description` | string | No | Optional description of the manifest |
| `config` | object | No | Configuration object for the manifest |
| `encryptionRules` | object | Yes | Encryption rules defining field behavior |

### Encryption Rules Structure

The `encryptionRules` object defines how fields should be encrypted:

```json
{
  "fields": {
    "fieldName": {
      "encrypted": true|false,
      "type": "string"
    }
  },
  "rsaKeyId": "key-uuid-123"
}
```

#### Field Rules

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `encrypted` | boolean | Yes | Whether the field should be encrypted |
| `type` | string | Yes | Data type (currently only "string" supported) |

#### RSA Key Configuration

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `rsaKeyId` | string | Yes | UUID of the RSA key to use for encryption |

### Response Fields

| Field | Type | Description |
|-------|------|-------------|
| `id` | string | Unique manifest identifier |
| `name` | string | Manifest name |
| `description` | string | Manifest description |
| `config` | object | Manifest configuration |
| `encryptionRules` | object | Encryption rules |
| `status` | string | Manifest status (active/inactive/draft) |
| `createdAt` | string | ISO 8601 timestamp |

## List Manifests

Retrieve all manifests for your account.

<RequestExample>
```bash
curl -X GET "https://api.cryptolay.com.br/api/customer/manifests?page=1&limit=10&search=user&status=active" \
  -H "X-API-Key: YOUR_API_KEY"
```
</RequestExample>

<ResponseExample>
```json
{
  "data": [
    {
      "id": "manifest-uuid-123",
      "name": "User Data Manifest",
      "description": "Encrypts sensitive user information",
      "config": {
        "version": "1.0"
      },
      "encryptionRules": {
        "fields": {
          "email": {
            "encrypted": true,
            "type": "string"
          },
          "phone": {
            "encrypted": true,
            "type": "string"
          }
        },
        "rsaKeyId": "key-uuid-123"
      },
      "status": "active",
      "createdAt": "2024-01-01T00:00:00Z",
      "updatedAt": "2024-01-01T00:00:00Z"
    }
  ],
  "pagination": {
    "currentPage": 1,
    "totalPages": 1,
    "totalItems": 1,
    "itemsPerPage": 10,
    "hasNextPage": false,
    "hasPrevPage": false
  }
}
```
</ResponseExample>

### Query Parameters

| Parameter | Type | Default | Description |
|-----------|------|---------|-------------|
| `page` | integer | 1 | Page number for pagination |
| `limit` | integer | 25 | Number of manifests per page |
| `search` | string | - | Search manifests by name or description |
| `status` | string | - | Filter by status (active/inactive/draft) |

## Get Manifest

Retrieve a specific manifest by ID.

<RequestExample>
```bash
curl -X GET https://api.cryptolay.com.br/api/customer/manifests/manifest-uuid-123 \
  -H "X-API-Key: YOUR_API_KEY"
```
</RequestExample>

<ResponseExample>
```json
{
  "id": "manifest-uuid-123",
  "name": "User Data Manifest",
  "description": "Encrypts sensitive user information",
  "config": {
    "version": "1.0",
    "description": "User data encryption configuration"
  },
  "encryptionRules": {
    "fields": {
      "email": {
        "encrypted": true,
        "type": "string"
      },
      "phone": {
        "encrypted": true,
        "type": "string"
      },
      "ssn": {
        "encrypted": true,
        "type": "string"
      }
    },
    "rsaKeyId": "key-uuid-123"
  },
  "status": "active",
  "createdAt": "2024-01-01T00:00:00Z",
  "updatedAt": "2024-01-01T00:00:00Z"
}
```
</ResponseExample>

## Update Manifest

Update an existing manifest.

<RequestExample>
```bash
curl -X PUT https://api.cryptolay.com.br/api/customer/manifests/manifest-uuid-123 \
  -H "Content-Type: application/json" \
  -H "X-API-Key: YOUR_API_KEY" \
  -d '{
    "name": "Updated User Data Manifest",
    "description": "Updated description",
    "encryptionRules": {
      "fields": {
        "email": {
          "encrypted": true,
          "type": "string"
        },
        "phone": {
          "encrypted": true,
          "type": "string"
        },
        "ssn": {
          "encrypted": true,
          "type": "string"
        },
        "address": {
          "encrypted": true,
          "type": "string"
        }
      },
      "rsaKeyId": "key-uuid-456"
    },
    "status": "active"
  }'
```
</RequestExample>

<ResponseExample>
```json
{
  "id": "manifest-uuid-123",
  "name": "Updated User Data Manifest",
  "description": "Updated description",
  "config": {
    "version": "1.0"
  },
  "encryptionRules": {
    "fields": {
      "email": {
        "encrypted": true,
        "type": "string"
      },
      "phone": {
        "encrypted": true,
        "type": "string"
      },
      "ssn": {
        "encrypted": true,
        "type": "string"
      },
      "address": {
        "encrypted": true,
        "type": "string"
      }
    },
    "rsaKeyId": "key-uuid-456"
  },
  "status": "active",
  "updatedAt": "2024-01-01T12:00:00Z",
  "message": "Manifest updated successfully"
}
```
</ResponseExample>

### Request Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `name` | string | No | New manifest name |
| `description` | string | No | Updated description |
| `config` | object | No | Updated configuration |
| `encryptionRules` | object | No | Updated encryption rules |
| `status` | string | No | New status (active/inactive/draft) |

## Delete Manifest

Delete a manifest. This action cannot be undone.

<RequestExample>
```bash
curl -X DELETE https://api.cryptolay.com.br/api/customer/manifests/manifest-uuid-123 \
  -H "X-API-Key: YOUR_API_KEY"
```
</RequestExample>

<ResponseExample>
```json
{
  "message": "Manifest deleted successfully"
}
```
</ResponseExample>

## Manifest Examples

### Basic User Data Manifest

```json
{
  "name": "User Profile Manifest",
  "description": "Encrypts user profile information",
  "config": {
    "version": "1.0"
  },
  "encryptionRules": {
    "fields": {
      "email": {
        "encrypted": true,
        "type": "string"
      },
      "phone": {
        "encrypted": true,
        "type": "string"
      },
      "ssn": {
        "encrypted": true,
        "type": "string"
      },
      "firstName": {
        "encrypted": false,
        "type": "string"
      },
      "lastName": {
        "encrypted": false,
        "type": "string"
      }
    },
    "rsaKeyId": "key-uuid-123"
  }
}
```

### Payment Data Manifest

```json
{
  "name": "Payment Information Manifest",
  "description": "Encrypts payment card information",
  "config": {
    "version": "1.0",
    "compliance": "PCI-DSS"
  },
  "encryptionRules": {
    "fields": {
      "cardNumber": {
        "encrypted": true,
        "type": "string"
      },
      "cvv": {
        "encrypted": true,
        "type": "string"
      },
      "expiryDate": {
        "encrypted": true,
        "type": "string"
      },
      "cardholderName": {
        "encrypted": true,
        "type": "string"
      },
      "billingAddress": {
        "encrypted": false,
        "type": "string"
      }
    },
    "rsaKeyId": "key-uuid-456"
  }
}
```

### Healthcare Data Manifest

```json
{
  "name": "Patient Data Manifest",
  "description": "Encrypts patient health information",
  "config": {
    "version": "1.0",
    "compliance": "HIPAA"
  },
  "encryptionRules": {
    "fields": {
      "patientId": {
        "encrypted": false,
        "type": "string"
      },
      "name": {
        "encrypted": true,
        "type": "string"
      },
      "ssn": {
        "encrypted": true,
        "type": "string"
      },
      "diagnosis": {
        "encrypted": true,
        "type": "string"
      },
      "medications": {
        "encrypted": true,
        "type": "string"
      },
      "roomNumber": {
        "encrypted": false,
        "type": "string"
      }
    },
    "rsaKeyId": "key-uuid-789"
  }
}
```

## Error Responses

### 400 Bad Request

```json
{
  "error": "Validation failed",
  "details": {
    "name": "Name is required",
    "encryptionRules": "Encryption rules are required"
  }
}
```

### 401 Unauthorized

```json
{
  "error": "Invalid API key"
}
```

### 403 Forbidden

```json
{
  "error": "Insufficient permissions"
}
```

### 404 Not Found

```json
{
  "error": "Manifest not found"
}
```

## Examples

### JavaScript

```javascript
// Create a manifest
const createManifest = async () => {
  const response = await fetch('https://api.cryptolay.com.br/api/customer/manifests', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'X-API-Key': 'your_api_key'
    },
    body: JSON.stringify({
      name: 'Payment Data Manifest',
      description: 'Encrypts payment information',
      config: {
        version: '1.0',
        compliance: 'PCI-DSS'
      },
      encryptionRules: {
        fields: {
          cardNumber: {
            encrypted: true,
            type: 'string'
          },
          cvv: {
            encrypted: true,
            type: 'string'
          },
          expiryDate: {
            encrypted: true,
            type: 'string'
          }
        },
        rsaKeyId: 'key-uuid-123'
      }
    })
  });
  
  return response.json();
};

// List manifests
const listManifests = async () => {
  const response = await fetch('https://api.cryptolay.com.br/api/customer/manifests', {
    headers: {
      'X-API-Key': 'your_api_key'
    }
  });
  
  return response.json();
};
```

### Python

```python
import requests

# Create a manifest
def create_manifest():
    response = requests.post(
        'https://api.cryptolay.com.br/api/customer/manifests',
        headers={
            'Content-Type': 'application/json',
            'X-API-Key': 'your_api_key'
        },
        json={
            'name': 'Payment Data Manifest',
            'description': 'Encrypts payment information',
            'config': {
                'version': '1.0',
                'compliance': 'PCI-DSS'
            },
            'encryptionRules': {
                'fields': {
                    'cardNumber': {
                        'encrypted': True,
                        'type': 'string'
                    },
                    'cvv': {
                        'encrypted': True,
                        'type': 'string'
                    },
                    'expiryDate': {
                        'encrypted': True,
                        'type': 'string'
                    }
                },
                'rsaKeyId': 'key-uuid-123'
            }
        }
    )
    return response.json()

# List manifests
def list_manifests():
    response = requests.get(
        'https://api.cryptolay.com.br/api/customer/manifests',
        headers={'X-API-Key': 'your_api_key'}
    )
    return response.json()
```

## Best Practices

1. **Use Descriptive Names** - Choose clear, descriptive names for your manifests
2. **Include All Fields** - Define all fields that might be used, even if not encrypted
3. **Separate by Data Type** - Create different manifests for different data types (user data, payment data, etc.)
4. **Test Manifests** - Test manifests with sample data before using in production
5. **Monitor Usage** - Track which manifests are being used most frequently
6. **Version Control** - Use the config.version field to track manifest versions
7. **Compliance Notes** - Add compliance information in the config object

## Security Notes

- Manifests are tied to your API key and customer account
- Only active manifests can be used for encryption
- Deleted manifests cannot be recovered
- RSA key IDs must be valid and active
- Field names are case-sensitive
- All encrypted fields must be strings 